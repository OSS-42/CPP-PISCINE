/* ************************************************************************** */
/*                                                                            */
/*                                                        :::      ::::::::   */
/*   SchrubberyCreationForm.cpp                         :+:      :+:    :+:   */
/*                                                    +:+ +:+         +:+     */
/*   By: ewurstei <ewurstei@student.42quebec.com    +#+  +:+       +#+        */
/*                                                +#+#+#+#+#+   +#+           */
/*   Created: 2023/05/09 16:10:23 by ewurstei          #+#    #+#             */
/*   Updated: 2023/05/09 17:15:26 by ewurstei         ###   ########.fr       */
/*                                                                            */
/* ************************************************************************** */

# include "../inc/SchrubberyCreationForm.hpp"

// ------ CANNON -------
SchrubberyCreationForm::SchrubberyCreationForm(std::string target) : AForm("target", 145, 137) {
	std::cout << GRN "Schrubbery Creation Form created" NC << std::endl;
}

SchrubberyCreationForm::SchrubberyCreationForm(const SchrubberyCreationForm& other) {
	*this = other;
}

SchrubberyCreationForm& SchrubberyCreationForm::operator=(const SchrubberyCreationForm& rhs) {
	if (this == &rhs)
		return (*this);

	return (*this);
}

SchrubberyCreationForm::~SchrubberyCreationForm(void) {
	std::cout << RED "Schrubbery Creation Form deleted" NC << std::endl;
}

// ------- MEMBER FUNCTIONS --------

std::string SchrubberyCreationForm::getTarget(void) {
	return (this->getName());
}

void SchrubberyCreationForm::execute (const Bureaucrat& executor) {
	if (executor.getGrade() > this->getGrade())
		throw AForm::GradeTooLowException();
	else {
		std::string extension = "_schrubbery";
		std::string filename = this->getTarget() + extension;
		std::ofstream outFile;
		outFile.open(filename);
		if (outFile.is_open() == false) {
			std::cout << "error: cannot open file: " << filename << std::endl;
			outFile.close();
			return;
		} else {
			outFile << 
			"###########################'`################################\
			###########################  V##'############################\
			#########################V'  `V  ############################\
			########################V'      ,############################\
			#########`#############V      ,A###########################V#\
			########' `###########V      ,###########################V',#\
			######V'   ###########l      ,####################V~~~~'',###\
			#####V'    ###########l      ##P' ###########V~~'   ,A#######\
			#####l      d#########l      V'  ,#######V~'       A#########\
			#####l      ##########l         ,####V''         ,###########\
			#####l        `V######l        ,###V'   .....;A##############\
			#####A,         `######A,     ,##V' ,A#######################\
			#######A,        `######A,    #V'  A########'''''##########''\
			##########,,,       `####A,           `#''           '''  ,,,\
			#############A,                               ,,,     ,######\
			######################oooo,                 ;####, ,#########\
			##################P'                   A,   ;#####V##########\
			#####P'    ''''       ,###             `#,     `V############\
			##P'                ,d###;              ##,       `V#########\
			##########A,,   #########A              )##,    ##A,..,ooA###\
			#############A, Y#########A,            )####, ,#############\
			###############A ############A,        ,###### ##############\
			###############################       ,#######V##############\
			###############################      ,#######################\
			##############################P    ,d########################\
			##############################'    d#########################\
			##############################     ##########################\
			##############################     ##########################\
			#############################P     ##########################\
			#############################'     ##########################\
			############################P      ##########################\
			###########################P'     ;##########################\
			###########################'     ,###########################\
			##########################       ############################\
			#########################       ,############################\
			########################        d###########P'    `Y#########\
			#######################        ,############        #########\
			######################        ,#############        #########\
			#####################        ,##############b.    ,d#########\
			####################        ,################################\
			###################         #################################\
			##################          #######################P'  `V##P'\
			#######P'     `V#           ###################P'			 \
			#####P'                    ,#################P'				 \
			###P'                      d##############P''				 \
			##P'                       V##############'					 \
			#P'                         `V###########'					 \
			#'                             `V##P'						 \
																	GNN94";
			outFile.close();
		}
	}
}